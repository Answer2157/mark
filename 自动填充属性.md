`@TableField(fill = FieldFill.INSERT_UPDATE)` 是 **MyBatis-Plus** 框架中用于定义字段自动填充策略的注解，它的作用是：  
**在数据库插入（INSERT）和更新（UPDATE）操作时，自动填充该字段的值**。常用于记录数据的创建时间、修改时间等场景。

---

### 核心解释

#### 1. **注解组成**
- `@TableField`：MyBatis-Plus 中用于配置数据库字段映射的注解。
- `fill`：`@TableField` 的一个属性，表示字段的填充策略。
- `FieldFill.INSERT_UPDATE`：填充策略的枚举值，表示在插入和更新时触发自动填充。

#### 2. **应用场景**
- **插入时填充**：例如记录数据的创建时间（`create_time`）。
- **更新时填充**：例如记录数据的最后修改时间（`update_time`）。
- **插入和更新都填充**：例如需要始终记录操作时间的字段。

#### 3. **常见填充策略（`FieldFill` 枚举）**
| 策略                      | 说明                   |
| ------------------------- | ---------------------- |
| `FieldFill.DEFAULT`       | 默认不填充             |
| `FieldFill.INSERT`        | 仅在插入时填充         |
| `FieldFill.UPDATE`        | 仅在更新时填充         |
| `FieldFill.INSERT_UPDATE` | **插入和更新时都填充** |

---

### 代码示例

#### 1. **实体类配置**
```java
@Data
@TableName("sys_user")
public class User {
    @TableId(type = IdType.AUTO)
    private Long id;
    
    private String username;
    
    // 插入和更新时自动填充
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime;
}
```

#### 2. **实现自动填充处理器**
需要编写一个类实现 `MetaObjectHandler` 接口，定义具体填充逻辑：
```java
@Component
public class MyMetaObjectHandler implements MetaObjectHandler {
    
    // 插入时填充逻辑
    @Override
    public void insertFill(MetaObject metaObject) {
        this.strictInsertFill(metaObject, "updateTime", LocalDateTime.class, LocalDateTime.now());
    }

    // 更新时填充逻辑
    @Override
    public void updateFill(MetaObject metaObject) {
        this.strictUpdateFill(metaObject, "updateTime", LocalDateTime.class, LocalDateTime.now());
    }
}
```

---

### 实际效果

- **插入数据时**：`updateTime` 字段会自动设置为当前时间。
- **更新数据时**：`updateTime` 字段会自动更新为当前时间。

---

### 注意事项

1. **字段类型匹配**  
   自动填充的值类型必须与实体类字段类型一致。例如：
   - 若字段是 `LocalDateTime`，填充值也需是 `LocalDateTime.now()`。
   - 若字段是 `String`，可以填充固定字符串（如操作人ID）。

2. **数据库字段默认值**  
   - 如果数据库字段有默认值（如 `DEFAULT CURRENT_TIMESTAMP`），需确保代码填充和数据库默认值逻辑一致。
   - 若同时存在代码填充和数据库默认值，以代码填充为准。

3. **填充字段需要是数据库表字段**  
   确保添加了 `@TableField(fill = ...)` 注解的字段在数据库表中存在，否则会报错。

---

### 完整使用场景示例

#### 场景描述
记录用户表的创建时间（`create_time`）和修改时间（`update_time`）：
- `create_time`：只在插入时填充。
- `update_time`：在插入和更新时都填充。

#### 实体类配置
```java
@Data
@TableName("sys_user")
public class User {
    @TableId(type = IdType.AUTO)
    private Long id;
    
    private String username;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createTime;  // 仅在插入时填充
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updateTime; // 插入和更新时都填充
}
```

#### 自动填充处理器
```java
@Component
public class MyMetaObjectHandler implements MetaObjectHandler {
    
    @Override
    public void insertFill(MetaObject metaObject) {
        this.strictInsertFill(metaObject, "createTime", LocalDateTime.class, LocalDateTime.now());
        this.strictInsertFill(metaObject, "updateTime", LocalDateTime.class, LocalDateTime.now());
    }

    @Override
    public void updateFill(MetaObject metaObject) {
        this.strictUpdateFill(metaObject, "updateTime", LocalDateTime.class, LocalDateTime.now());
    }
}
```

---

### 总结
通过 `@TableField(fill = FieldFill.INSERT_UPDATE)`，可以轻松实现字段的自动填充功能，减少手动维护字段的代码量，特别适合以下场景：
- 审计字段（创建人、修改人）。
- 时间戳字段（创建时间、修改时间）。
- 业务状态字段（自动记录操作标记）。