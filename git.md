## git工作

远程仓库  <-----> 本地仓库 <-----> 暂存区 <-----> 工作目录

1. 工作目录：暂时存放我们写的代码（可进行新版本的提交）
2. 暂存区：暂时保存提交的内容（新版本提交后会放到本地仓库）
3. 本地仓库：位于我们电脑上的一个版本控制仓库（存放当前项目各个版本代码的增删信息）
4. 远程仓库：为位于服务器上的版本控制仓库（服务器上的版本信息可由本地仓库推上去，也可从服务器抓取到本地仓库）

## 基本命令介绍

### 创建

1. 创建本地仓库：git init  创建成功后会自动生成git目录![1683638636454](image/marlk/1683638636454.png)
2. 创建成功后：查询状态 git status  可以看到下图![1683638655993](image/marlk/1683638655993.png)

### 添加和提交

1. 添加：git  add hello.text  #也可以 add . 一次性添加目录下所有的  （add后在暂存区）
2. 提交：

   ```
   git commit -m 'Initial Commit' (第一次提交要有描述)注： 只有修改时才能使用git commit -a  
   ```

   ![1683645882719](image/marlk/1683645882719.png)
3. 查看提交记录：git log  (可加条件 --oneline  或者--graph 或者 --all )![1683645888392](image/marlk/1683645888392.png)
4. 修改文件后查询状态：git status  然后可以add 存到暂存区![1683709372296](image/marlk/1683709372296.png)
5. 提交修改并查询：git commit -m 'Modify first'                    ![1683710116886](image/marlk/1683710116886.png)![1683710121713](image/marlk/1683710121713.png)
6. 查看最近一次变更的详细内容：git show[可加上commit ID 查看指定的提交记录]再查看状态为清空状态![1683710569537](image/marlk/1683710569537.png)![1683710573308](image/marlk/1683710573308.png)
7. .gitignore文件来确定一个文件忽略列表，如果忽略列表中的文件存在且不被追踪状态，则git不会对其进行任何检查： *.txt----->匹配所有以txt结尾的文件；！2157.txt----->上面排除所有以txt结尾的文件但这个不排除；test/--->直接指定一个文件夹，文件夹下的所有文件将全部忽略； xxx/*.txt---->目录中所有txt结尾的文件，但不包括子目录；xxx/**/*.txt----->目录中所有以txt结尾的文件，包括子目录

### 回滚

1. 回滚：会带过去的版本可以执行回滚操作，执行后，可以将各种空间的内容回复到指定提交的状态：git reset -- hard commitID
2. 若想再回到之前的状态，但是提交日志消失了，可以通过“git reflog”操作查看所有分支的操作记录!![1683888480418](image/marlk/1683888480418.png)

### 分支

1. 查看当前仓库内的分支：git branch
2. 创建分支：git branch test(对应的删除分支是 git branch -d test)
3. 切换分支：git checkout test![1683891165097](https://file+.vscode-resource.vscode-cdn.net/d%3A//image/marlk/1683891165097.png)
4. 合并分支：先切换到主分支后在执行分支合并命令：git merge test,若产生冲突可以手动解决后再提交![1683893006238](image/marlk/1683893006238.png)
5. 查看冲突：git diff
6. 变基分支：变基与合并不同合并是分支回到主干的过程，而变基是直接修改分支开始的位置，eg：把test分支变基到master上，那么test会将分支移动到master最后一次提交的位置，执行“git rebase master”命令，变基后，test相当于同步了此前master分支的全部提交
7. 优选：可以选择将其他分支上的提交作用作用于当前分支，这种操作成为cherrypick：git cherry-pick <commit -id>:单独合并一个提交

### 使用IDEA进行版本控制

1. 黄绿色的文件为被排除的文件
2. 红色的文件为未追踪状态的文件
3. 黄色的文件为提交过后的文件
4. 蓝色的文件为修改过的文件![1684038768696](image/marlk/1684038768696.png)![1684038774976](image/marlk/1684038774976.png)![1684038779426](image/marlk/1684038779426.png)

### 远程仓库

1. 创建仓库后，通过推送来将本地仓库中的内容推送到远程仓库：
   ```
   git remote add 名称 远程仓库地址
   git push 远程仓库名称 本地分支名称[:远端分支名称]
   ```
2. 将远端分支和本地分支进行绑定，绑定后就不需要指定分支的名称：
   ```
   git push --set-upstream origin master:master
   git push origin
   ```
3. 克隆仓库：git clone 地址
4. 更新仓库：当出现提交被拒则
   git fetch 手动合并
   git pull 获取加合并

### 指令

1. ls --------->查看当前文件下的文件
2. ls -a ------>包含隐藏文件查看文件
3. ls -l ------->查看文件是否可读可写等
4. ls -al ------>3 + 隐藏文件
5. pwd ------->查询当前位置
6. mkdir hello --->创建一个名为hello的文件夹
7. cd hello--->进入hello文件夹
8. cd .. 或 cd -  ---->回到上一个文件夹
9. ls .. -------->获取上一级的目录
10. ls ../.. ----->获取上一级的上一级的目录
11. 查询文件内容：cat hello;cat hello.txt 等等
12. 编辑文件：vi hello.txt![1683892012614](image/marlk/1683892012614.png)![1683892034554](image/marlk/1683892034554.png)
